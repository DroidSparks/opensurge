// Allegro logo
// script by Alexandre
object ".allegro_startup"
{
    requires 0.2.0
    detach_from_camera
    always_active

    // main
    state "main"
    {
        set_absolute_position screen_width()/2 screen_height()/2
        set_animation SD_ALLEGRO 0
        play_sample samples/allegro.wav
        change_state wait
    }

    state wait
    {
        on_button_pressed fire3 stop
        on_button_pressed fire4 stop
        on_timeout 3.5 fadeout
    }

    state stop
    {
        stop_sample samples/allegro.wav
        change_state fadeout_fast
    }

    state fadeout
    {
        let $_fade_in=0
        let $_fade_duration=1
        create_child .fade_effect
        change_state wait2
    }

    state fadeout_fast
    {
        let $_fade_in=0
        let $_fade_duration=0.5
        create_child .fade_effect
        change_state wait3
    }

    state wait2
    {
        on_timeout 2 next
    }

    state wait3
    {
        on_timeout 1 next
    }

    state next
    {
        next_level
    }
}
